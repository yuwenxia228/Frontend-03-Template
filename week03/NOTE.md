学习笔记
获得了服务器返回的html信息后，对html文件进行解析，构建dom树。
首先，还是利用状态机的方法，根据不同的状态，处理不同的事情，
<:开始标签，进去tagOpen状态
tagOpen:如果是普通字符进入tagName状态
tagName:普通字符保存起来，作为标签名字的一部分
beforeAttributeName
attributeName
beforeAttributeValue
doubleQuoted
开始标签结束的时候将这个element(包括属性)存入栈中，然后中间的内容作为文本节点保存。遇到结束标签的开始，依次进入同样的状态机，同时要判断是否是自封闭标签，不是的话和栈顶元素匹配，匹配成功则退栈，最后dom树就构建成功了。
css规则的收集在style标签入栈之后的文本节点入栈是发生，利用css包完成。规则收集完成之后，在每一个元素入栈是都会跟css规则进行匹配。匹配过程如下:将css规则中的选择器变成数组并倒序，与当前栈中的元素从内到外进行比较，相等则继续进行外层比较，逐层匹配，最后选择器全部匹配完则此条规则与该元素匹配成功，然后再看优先级，如果优先级不存在则直接保存规则内容，否则比较优先级，优先级较高的才能覆盖原规则。根据这个方法依次解析所有元素，包含css的dom树就构建成功了。
